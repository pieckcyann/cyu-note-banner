# Inventory of Pixel Banner Plugin

**Last Updated:** June 30, 2025

Below is a concise overview of all files and their primary functions or methods. This document helps developers quickly locate and understand the key points in the codebase.

---

## Root Files

### `manifest.json`
**Description**:  
- Plugin manifest containing metadata like ID, name, version, minimum app version, description, author info, and funding URL.
- Current Version: 3.5.3

### `package.json`
**Description**:  
- Node.js package definition with build scripts and dependencies.
- Key scripts: `test-build`, `build`, `clean`
- Key development dependencies: esbuild, builtin-modules, fs-extra, marked, emojilib

### `build.mjs`
**Description**:  
- Build script that uses esbuild to compile the project and copy necessary files to the target directory.
- Core function: `copyFiles()` - Copies styles.css, main.js, and manifest.json to the target directory.

### `styles.css`
**Description**:  
- Global styles for the plugin, including banner appearance, controls, modals, and UI components.

### `README.md`
**Description**:  
- Project documentation with installation instructions, features overview, and usage examples.

### `CHANGELOG.md`
**Description**:  
- Detailed version history and release notes for all plugin versions.

### `UPDATE.md`
**Description**:  
- Release notes for the current version, used by the plugin to display update notifications.

### `.gitignore`
**Description**:  
- Git ignore rules for excluding build artifacts, dependencies, and temporary files.

### `main.js`
**Description**:  
- Compiled/bundled main plugin file generated by the build process.

---

## `/img` Directory
**Description**:  
- Contains plugin logos, screenshots, and promotional images used in documentation and releases.
- Includes banner examples and third-party API demonstration images.

---

## `/scripts` Directory

### `/scripts/esbuild.config.mjs`
**Description**:  
- Configures esbuild for bundling the plugin
- Creates a virtual module for release notes from UPDATE.md
- Sets up build options including minification, sourcemaps, and external dependencies
- Handles both production and development builds

### `/scripts/copy-build.mjs`
**Description**:  
- Helper script to copy built files to the test vault location
- Ensures the plugin can be tested in a local Obsidian environment

---

## `/src` Directory Files

## `/src/main.js`
**Exports**:  
- **default (PixelBannerPlugin)**  
  This file simply exports the main plugin class (from `src/core/pixelBannerPlugin`) as the default export.

---

## `/src/core/pixelBannerPlugin.js`
**Class**: `PixelBannerPlugin` (extends Obsidian's `Plugin`)  
**Key Responsibilities**:  
- Main entry point for the plugin, handling initialization, command registration, event listening, and cleanup.  
- Coordinates banner logic and API calls, caching, and updating banners across open notes.

**Notable Methods**:
1. **onload()**  
   Initializes the plugin: loads settings, checks version, registers commands/events, sets up watchers.
2. **onunload()**  
   Cleans up observers, frees resources, and clears the icon overlay pool.
3. **verifyPixelBannerPlusCredentials()**  
   Confirms credentials with the external "Pixel Banner Plus" service.
4. **checkVersion()**  
   Shows release notes if the plugin has been updated to a new version.
5. **getReleaseNotes(version)**  
   Retrieves or returns release notes content for the given version.
6. **debouncedEnsureBanner()**  
   Debounced function that re-checks and updates the banner display if needed.
7. Plus many "bound" methods that delegate to helpers (e.g. `updateBanner()`, `cleanupCache()`, etc.) after binding them to `this`.

---

## `/src/core/bannerIconHelpers.js`
Provides utility methods for managing the "icon overlay" feature on banners.

**Methods**:
1. **normalizeColor(color)**  
   Returns a normalized/cleaned color string (lowercase, no spaces) for consistency.
2. **getIconOverlay(plugin)**  
   Obtains a banner icon overlay from the pool or creates a new overlay `<div>` if none are available.
3. **returnIconOverlay(plugin, overlay)**  
   Resets and returns an icon overlay to the pool for later reuse.
4. **shouldUpdateIconOverlay(plugin, existingOverlay, newIconState, viewType)**  
   Checks whether the existing icon overlay's styling or state differs from the desired icon state and thus needs an update.
5. **handleSetBannerIcon(plugin)**  
   Opens an emoji selection modal and updates frontmatter with the chosen banner icon.
6. **handleSetBannerIconImage(plugin)**  
   Opens the Icon Image Selection modal for adding images to banner icons, supporting local images, web URLs, and online collections.
7. **applyIconRotation(iconElement, rotationDegrees)**  
   Applies rotation transformation to the banner icon based on user-defined degree values (0-360 degrees).
8. **cleanupIconOverlay(plugin, view)**  
   Removes any non-persistent icon overlays from the specified view.

---

## `/src/core/bannerManager.js`
Handles adding and updating "pixel banners" (the large images at the top of notes).

**Methods**:
1. **addPixelBanner(plugin, el, ctx)**  
   Creates or updates a banner `<div>` in the specified element, adds icons (e.g. view, pin, refresh, set icon).
2. **updateBanner(plugin, view, isContentChange, updateMode)**  
   Core method to apply or refresh a banner in a particular MarkdownView, with various modes for partial or full updates.
3. **applyBannerSettings(plugin, bannerDiv, ctx, isEmbedded)**  
   Applies style-based settings: fade, size, border radius, max-width, alignment, etc., to the banner `<div>`.
4. **applyContentStartPosition(plugin, el, contentStartPosition)**  
   Sets the vertical offset at which the note content begins below the banner.
5. **applyBannerWidth(plugin, el)**  
   Ensures the banner matches the width of the note's container.
6. **updateAllBanners(plugin)**  
   Iterates through all workspace leaves and updates banners in each markdown view.
7. **updateBannerPosition(plugin, file, position)**  
   Updates the note's frontmatter for custom X/Y positions (used by "Target Position" modals).
8. **registerMarkdownPostProcessor(plugin)**
   Markdown post process to add banners to "hover preview" note views

---

## `/src/core/bannerUtils.js`
General-purpose utilities for processing banner-related inputs and folder-based overrides.

**Methods**:
1. **getInputType(input)**  
   Figures out if the banner input is a local vault path, an Obsidian link, a direct URL, or a keyword for API usage.
2. **getPathFromObsidianLink(link)**  
   Resolves an internal link `[[...]]` to the corresponding file in the vault.
3. **getVaultImageUrl(path)**  
   Reads an image from the vault, returns a `blob:` URL to display in the banner.
4. **preloadImage(url)**  
   Preloads or "fetches" an image so it can be cached or validated.
5. **getFolderPath(filePath)**  
   Returns just the folder portion (directory path) from a file path.
6. **getFolderSpecificImage(filePath)**  
   Checks the plugin's folder-based overrides for a matching path and merges any configured image settings.
7. **getFolderSpecificSetting(filePath, settingName)**  
   Returns a specific override setting if defined for the folder in question.
8. **getRandomImageFromFolder(folderPath)**  
   Picks a random image from the specified vault folder.
9. **getActiveApiProvider()**  
   Chooses an image-hosting provider, or picks one randomly if the user has selected "all".
10. **hasBannerFrontmatter(file)**  
   Checks the file's frontmatter for the presence of a banner field.
11. **createFolderImageSettings(folderImage)**  
   Creates or merges the folder-specific image settings, optionally randomizing if shuffle is enabled.

---

## `/src/core/cacheHelpers.js`
Implements caching logic to speed up banner loads and reduce repeated API calls.

**Methods**:
1. **generateCacheKey(filePath, leafId, isShuffled)**  
   Produces a unique cache key for a note and leaf, plus shuffle state if relevant.
2. **getCacheEntriesForFile(filePath)**  
   Fetches all cache objects associated with a given file path.
3. **cleanupCache(force = false)**  
   Removes stale or excessive entries from the banner cache, optionally forced.
4. **invalidateLeafCache(leafId)**  
   Finds and removes any cache entries related to the specified leaf.

---

## `/src/core/domManager.js`
Manages DOM observers and watchers to keep banners in sync when Obsidian reflows or modifies the document.

**Methods**:
1. **setupMutationObserver()**  
   Watches for large-scale DOM changes (like banner removal) and triggers re-check if needed.
2. **setupResizeObserver(viewContent)**  
   Attaches a `ResizeObserver` to adjust banner width dynamically when the container changes size.
3. **updateFieldVisibility(view)**  
   Hides banner-related frontmatter fields in preview mode if plugin settings require it.
4. **updateEmbeddedTitlesVisibility()**  
   Toggles whether embedded note titles are displayed or hidden in embeds.
5. **updateEmbeddedBannersVisibility()**  
   Toggles whether embedded banners are displayed in embedded notes.
6. **cleanupPreviousLeaf(previousLeaf)**  
   Removes pixel banner elements, pinned overlays, and blob URLs from a leaf that the user navigated away from.

---

## `/src/core/eventHandler.js`
Defines major event callbacks for Obsidian's workspace (e.g., leaf changes, mode changes).

**Methods**:
1. **handleActiveLeafChange(leaf)**  
   Cleans up the previous leaf's banner resources, updates or shuffles the new leaf's banner, and caches state.
2. **handleLayoutChange()**  
   Called when Obsidian's layout is reorganized; cleans up orphaned cache, re-updates any banners if needed.
3. **handleModeChange(leaf)**  
   Re-renders or hides frontmatter fields if the user toggles between preview/edit modes.
4. **handleSelectImage()**  
   Opens a modal to select or upload a new banner image from the vault, then modifies frontmatter.
5. **handleBannerIconClick()**  
   Opens the Select Pixel Banner modal for choosing between different banner selection methods.

---

## `/src/core/settings.js`
Functions for loading and saving plugin settings to disk.

**Functions**:
1. **loadSettings(plugin)**  
   Reads the plugin's data, merges with defaults, ensures array-based fields.  
2. **saveSettings(plugin)**  
   Persists setting changes, then triggers a re-check of banners to apply updates.

---

## `/src/modal/modals/emojiSelectionModal.js`
**Class**: `EmojiSelectionModal` (extends `Modal`)  
Lets users pick from an emoji list to set the banner icon.

**Key Methods**:
- **onOpen()**: Renders the modal's search box, emoji grid, and "Set Banner Icon" button.  
- **updateEmojiGrid()**: Filters and shows emojis in a grid by category.  
- **getEmojiDescription(emoji)**: Retrieves a textual description from an internal map.  
- **onClose()**: Cleans up.

---

## `/src/modal/modals/folderSelectionModal.js`
**Class**: `FolderSelectionModal` (extends `FuzzySuggestModal`)  
Prompts the user to pick a folder from the vault.

**Key Methods**:
- **getItems()**, **getItemText()**, **onChooseItem()**: Standard fuzzy search overrides.  
- **onOpen()**: Pre-populates the input with a default folder.

---

## `/src/modal/modals/generateAIBannerModal.js`
**Class**: `GenerateAIBannerModal`  
Provides an interface to call "Pixel Banner Plus" AI to generate a banner image.

**Key Methods**:
1. **generateImage()**  
   Sends the prompt and desired size to the AI endpoint, updates the UI upon success or failure.  
2. **checkDownloadHistory(img)**  
   Checks if the user already downloaded that image previously.  
3. **onOpen()**  
   Builds the entire form (prompt, width/height sliders, "Generate Image" button, plus a "Recently Generated" history).  
4. **getPromptInspiration() & getPromptInspirationFromSeed()**  
   Calls an endpoint for random or seed-based new prompt suggestions.  
5. **refreshHistoryContainer()**  
   Reloads the recent images from the service.  
6. **updateHistoryContent()**  
   Updates the history container with images using pagination.  
7. **updatePaginationUI()**  
   Updates the pagination UI with buttons for navigating through the history.  
8. **onClose()**  
   Clears the modal content.

---

## `/src/modal/modals/imageSelectionModal.js`
**Class**: `ImageSelectionModal`  
Lists user's images from the vault to pick from, or to upload a new one.

**Key Methods**:
1. **confirmDelete(file)** and **deleteImage(file)**  
   Confirms and performs deletion of an image from the vault.  
2. **onOpen()**  
   Renders search box, upload button, sorting/pagination, image grid.  
3. **updateImageGrid()**  
   Filters, sorts, and paginates the displayed image files.  
4. **sortFiles(files)**, **formatFileSize(bytes)**, **formatDate(time)**  
   Utility methods for sorting and pretty-displaying file data.  
5. **onClose()**  
   Clears UI.

---

## `/src/modal/modals/iconImageSelectionModal.js`
**Class**: `IconImageSelectionModal` (extends `Modal`)  
**Description**:
- Provides an interface for selecting icon images from various sources (local vault, collections, etc.)
- Manages pagination, searching, and categorization of icon images

**Key Methods**:
1. **onOpen()**  
   Initializes the modal UI with tabs for vault files, collections, and other sources.
2. **loadIconCategories()**  
   Fetches icon categories from the Pixel Banner Plus API.
3. **loadIconsByCategory()**  
   Loads icons for a specific category with pagination support.
4. **searchIcons()**  
   Searches for icons based on a query term.
5. **setSelectedIcon()**  
   Sets the selected icon and passes it to the callback function.

---

## `/src/modal/modals/pixelBannerStoreModal.js`
**Class**: `PixelBannerStoreModal` (extends `Modal`)  
Provides interface to browse and select banners from the Pixel Banner Plus collection, with full support for both image and video banners.

**Key Methods**:
1. **onOpen()**  
   Renders the store interface with category dropdown, search functionality, and pagination.
2. **loadCategoryImages(categoryId, page)**  
   Fetches images/videos for the selected category with pagination support.
3. **displayImages(items)**  
   Renders items in a responsive grid with video badges, thumbnails, and voting UI.
4. **createImageCard(item)**  
   Creates individual cards for images/videos with play overlays for videos.
5. **showPreview(item)**  
   Opens purchase confirmation modal with image/video preview capabilities.
6. **downloadAndSaveBanner(item)**  
   Handles downloading and saving both images and videos with proper file extensions.
7. **saveVideoFileWithPrompts(videoData, filename)**  
   Manages video file saving workflow with folder and filename prompts.
8. **saveVideoLocally(videoData, folderPath, filename)**  
   Performs actual video file saving from base64 data.
9. **searchImages(query, page)**  
   Implements search functionality across all banner types.
10. **loadVoteStats(items)**  
    Loads voting statistics for banners when voting is enabled.
11. **addStyle()**  
    Injects comprehensive styling including video badges and modal layouts.

The modal now supports video banners with thumbnails, play icons, proper file extension handling, and maintains the same user experience for both images and videos. Video files are saved with correct extensions (.mp4/.mov) and users can select save locations.

---

## `/src/modal/modals/selectPixelBannerModal.js`
**Class**: `SelectPixelBannerModal` (extends `Modal`)  
**Description**:  
- The main selection modal for choosing the banner source type or modification method.
- Presents different options for banner images based on available features and API status.

**Key Methods**:
1. **onOpen()**  
   Initializes the UI and begins API verification if necessary.
2. **initializeBasicUI()**  
   Sets up the core UI elements that don't depend on API status.
3. **initializeAPIDependentSections()**  
   Configures UI sections that require API access.
4. **updateAPIStatusUI()**  
   Updates the UI to reflect current API connection status.
5. **createBannerSelectionOptions()**  
   Generates clickable options for different banner sources.

---

## `/src/modal/modals/webAddressModal.js`
**Class**: `WebAddressModal` (extends `Modal`)  
Allows users to enter a URL for a banner image, validates it, and sets it in the frontmatter.

**Key Methods**:
1. **onOpen()**  
   Renders the URL input field, error container, and buttons for setting the banner or returning to the main menu.
2. **validateImageUrl(url)**  
   Validates that the provided URL leads to a valid image by attempting to load it.
3. **showError(message)** and **clearError()**  
   Utility methods to display or remove validation error messages.
4. **addStyle()**  
   Injects custom styling for the URL modal layout.
5. **onClose()**  
   Cleans up the modal content and styles.

The modal handles validation of image URLs, provides user feedback for errors, and updates note frontmatter with the validated URL as a banner image source.

---

## `/src/modal/modals/imageViewModal.js`
**Class**: `ImageViewModal`  
Shows a single image at larger size in a centered modal.

**Key Methods**:
- **onOpen()**: Embeds the image in the modal, plus a close button.
- **onClose()**: Cleans up.

---

## `/src/modal/modals/releaseNotesModal.js`
**Class**: `ReleaseNotesModal`  
Displays release notes (when the plugin updates).

**Key Methods**:
- **onOpen()**: Builds the release notes UI.  
- **onClose()**: Empties the modal.

---

## `/src/modal/modals/saveImageModal.js`
**Class**: `SaveImageModal`  
Lets the user specify a file name for a new image being saved to the vault.

**Key Methods**:
- **onOpen()**: Shows a text field for the file name and a toggle for "use as banner."  
- **onClose()**: Empties out the modal.

---

## `/src/modal/modals/targetPositionModal.js`
**Class**: `TargetPositionModal`  
Helps visually set or tweak the X/Y offsets for the banner and icon.

**Key Methods**:
1. **updateDisplayMode(mode, zoom?)**  
   Updates frontmatter for display type (cover, contain, or custom zoom).  
2. **updateBannerHeight(height)**, **updateBannerContentStartPosition(pos)**, **updateBannerIconXPosition(pos)**, **updateRepeatMode(repeat)**  
   Tweaks frontmatter for banner dimensions, display and icon offset.  
3. **onOpen()**  
   Draws a draggable or clickable target box to set X/Y.  
4. **addStyle()**  
   Injects styles for crosshair lines, etc.  
5. **onClose()**  
   Removes the style element.

---

## `/src/modal/modals/iconImageSelectionModal.js`
**Class**: `IconImageSelectionModal` (extends `Modal`)  
Provides image selection for banner icons, allowing users to choose from local images, web URLs, or online collections.

**Key Methods**:
1. **onOpen()**  
   Builds the modal interface with tabs for different icon image sources.
2. **renderCollectionsTab()**  
   Creates the interface for browsing and selecting from online icon collections.
3. **renderLocalTab()**  
   Displays local vault images that can be used as banner icons.
4. **renderWebTab()**  
   Provides an interface for entering web URLs for icon images.
5. **handleImageSelection(imagePath)**  
   Processes the selected image and updates the banner icon.

---

## `/src/modal/modals/iconFolderSelectionModal.js`
**Class**: `IconFolderSelectionModal` (extends `FuzzySuggestModal`)  
Allows selection of a folder containing images to use as banner icons.

**Key Methods**:
1. **getItems()**  
   Returns a list of folders from the vault.
2. **onChooseItem(folder)**  
   Sets the selected folder as the source for banner icons.

---

## `/src/modal/modals/targetPositionModal.js`
**Class**: `TargetPositionModal` (extends `Modal`)  
Provides an interactive UI for adjusting banner position, size, and appearance with enhanced controls for icon styling.

**Key Methods**:
1. **onOpen()**  
   Builds the UI with controls for banner position, size, alignment, and icon settings.
2. **createBannerControls()**  
   Creates sliders and inputs for banner position, size, and display settings.
3. **createBorderRadiusControl()**  
   Creates the new border radius slider control for adjusting banner corner rounding.
4. **createIconControls()**  
   Creates controls for banner icon styling, including size, position, opacity, and rotation.
5. **onClose()**  
   Cleans up the modal and saves any changes to banner settings.

---

## `/src/modal/modals/dailyGame.js`
**Class**: `DailyGameModal` (extends `Modal`)  
Provides a daily game or challenge feature within the plugin.

**Key Methods**:
1. **onOpen()**  
   Renders the daily game interface with game elements and instructions.
2. **initializeGame()**  
   Sets up the game state, rules, and initial layout for the player.
3. **handleUserInteraction()**  
   Processes user inputs and updates the game state accordingly.
4. **updateGameUI()**  
   Refreshes the UI based on current game state and progress.
5. **onClose()**  
   Cleans up the game state and modal content.

---

## `/src/modal/modals.js`
Exports all modals from the `modal/modals` directory.

**Exports**:
- `ReleaseNotesModal`
- `ImageViewModal`
- `ImageSelectionModal`
- `FolderSelectionModal`
- `GenerateAIBannerModal`
- `SaveImageModal`
- `EmojiSelectionModal`
- `TargetPositionModal`
- `SelectPixelBannerModal`
- `PixelBannerStoreModal`
- `WebAddressModal`
- `DailyGameModal`
- `IconImageSelectionModal`
- `IconFolderSelectionModal`

---

## `/src/resources/constants.js`
**Exports**:  
- `PIXEL_BANNER_PLUS`: Holds API-related URL endpoints and defaults for the optional advanced service.

---

## `/src/resources/emojis.js`
**Exports**:  
- `emojiList`: Organized categories of emojis, used in `EmojiSelectionModal`.  
- `emojiDescriptions`: Mappings of emoji to descriptive text for search.

---

## `/src/resources/flags.js`
**Exports**:
- `flags`: Variouls colored flags to be used as the Pixel Banner icon.

---

## `/src/services/apiPIxelBannerPlus.js`
**Methods**:
1. **verifyPixelBannerPlusCredentials(plugin)**  
   Performs an HTTP GET to validate the user's email/API key with the Pixel Banner Plus service.

---

## `/src/services/apiService.js`
Provides helper functions for fetching random images from various image provider APIs.

**Methods**:
1. **makeRequest(url, options)**  
   A low-level request function with a simple rate limiter.  
2. **fetchPexelsImage(plugin, keyword)**  
   Pulls a random image from Pexels by keyword, falling back to default keywords.  
3. **fetchPixabayImage(plugin, keyword)**  
   Pulls images from Pixabay, attempts multiple times/fallback keywords.  
4. **fetchFlickrImage(plugin, keyword)**  
   Pulls images from Flickr, randomly picks from the results.  
5. **fetchUnsplashImage(plugin, keyword)**  
   Pulls from Unsplash, also tries fallback keywords if no results.

---

## `/src/settings/settings.js`
Contains global **DEFAULT_SETTINGS** object, plus a settings tab class.

**Key Exports**:
1. **DEFAULT_SETTINGS**  
   An object holding all default plugin options (banner fields, API keys, flags).  
2. **FolderSuggestModal**  
   A fuzzy folder selector for user-chosen folder settings.  
3. **PixelBannerSettingTab** (extends `PluginSettingTab`)  
   Builds the plugin's settings UI with various categories/tabs.  
4. **debounce(func, wait)** and **random20characters()**  
   Utility functions for delayed calls and random string generation.

---

## `/src/settings/tabs/`
Contains multiple small modules for organizing plugin settings sub-UI, mostly used by the main `PixelBannerSettingTab`.

- **settingsTabAPISettings.js**  
  Creates or loads API-related fields (API keys, test buttons).  
- **settingsTabCustomFieldNames.js**  
  Lets users define custom frontmatter field names for banners, X/Y positions, and more.  
- **settingsTabFolderImages.js**  
  Manages settings for folder-specific banner overrides.  
- **settingsTabGeneral.js**  
  Configures general plugin options.  
- **settingsTabPixelBannerPlus.js**  
  Contains settings for Pixel Banner Plus authentication and API connection.

---

## `/src/utils/`
Various helper scripts:

## `/src/utils/handlePinIconClick.js`
Handles the process of "pinning" a banner image by downloading and saving it to the vault.

**Methods**:
1. **handlePinIconClick(imageUrl, plugin, usedField, suggestedFilename)**  
   Main function that downloads an image, prompts for save location and filename, and optionally sets it as banner.
2. **fetchImage(url)**  
   Downloads an image from a URL and returns the array buffer.
3. **saveImageLocally(arrayBuffer, plugin, suggestedFilename)**  
   Saves image data to the vault with user-selected folder and filename.
4. **detectImageFormat(arrayBuffer)**  
   Detects image format (JPEG, PNG, GIF, WebP) from binary data headers.
5. **waitForFileRename(file, plugin)**  
   Waits for potential file rename operations to complete before returning final path.

## `/src/utils/downloadHistory.js`
**Class**: `DownloadHistory`  
Manages history of downloaded AI-generated images to prevent duplicates.

**Methods**:
1. **constructor()**  
   Initializes with max history of 50 items and loads existing history from localStorage.
2. **loadHistory()**  
   Loads download history from localStorage.
3. **saveHistory()**  
   Persists current history to localStorage.
4. **addImage(imageId)**  
   Adds a new image ID to history, maintaining max limit with FIFO removal.
5. **hasImage(imageId)**  
   Checks if an image ID already exists in download history.

## `/src/utils/frontmatterUtils.js`
Utilities for working with note frontmatter in Obsidian.

**Methods**:
1. **getFrontmatterValue(frontmatter, fieldNames)**  
   Retrieves frontmatter values by field name(s), handling arrays and comma-separated fields, with proper zero value handling.
2. **getValueWithZeroCheck(values)**  
   Gets the first valid value from an array of values, properly handling zero values that shouldn't be treated as falsy.
3. **updateNoteFrontmatter(imagePath, plugin, usedField)**  
   Updates the active note's frontmatter with a banner image reference, handling existing frontmatter and custom field names.

## `/src/utils/debounce.js`
Provides utility functions for debouncing function calls.

**Methods**:
1. **debounceFunction(func, wait)**  
   Standard debounce utility that delays function execution until wait time has passed.
2. **debounceImmediate(func, wait)**  
   Executes first call immediately, then debounces subsequent calls.
3. **debounceAndSwallow(func, wait)**  
   Executes first call, ignores subsequent calls within wait time.

## `/src/utils/getCurrentTheme.js`
Utility for detecting the current Obsidian theme.

**Methods**:
1. **getCurrentTheme()**  
   Returns the active theme in Obsidian (light or dark) for theme-aware rendering.

## `/src/utils/fractionTextDisplay.js`
Utility for converting decimal numbers to fractional string representations.

**Methods**:
1. **decimalToFractionString(num)**  
   Converts decimal numbers like 0.25, 0.5, 0.75, 1.25 to fraction strings like ¼, ½, ¾, 1¼. Used in modals for displaying fractional values in a more readable format.

## `/src/utils/semver.js`
Provides semantic versioning utilities for the plugin.

**Exports**:
- **semver**: Object containing version parsing and comparison utilities

**Methods**:
1. **semver.parse(versionString)**  
   Parses a version string (e.g., "3.5.2") into an object with major, minor, and patch numbers.
2. **semver.gt(v1, v2)**  
   Compares two version strings and returns true if v1 is greater than v2.

---

## Other Notes

- frontmatter fields are hidden in reading mode if hidePixelBannerFields is enabled. Update these files:
   - `src/core/domManager.js` (function: updateFieldVisibility)
   - `src/core/pixelBannerPlugin.js` (function: postProcessor)
